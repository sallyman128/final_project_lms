(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{146:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),a=n(24),o=n.n(a),u=n(5),i=n(6),c=n(8),l=n(7),d=n(9),m=n(17),p=n(2),g=n(10),E=(n(56),function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Welcome to MyLMS!"))}}]),t}(r.Component)),h=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"error-messages"},"Sorry, this URL doesn't exist. Please use one of the above navigation bar options to get back on track.")}}]),t}(r.Component),f=(n(58),function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"linksToDisplay",value:function(){return this.props.loggedIn?[{name:"Dashboard",url:"/"},{name:"Catalog",url:"/courses"},{name:"Students",url:"/students"},{name:"Logout",url:"/logout"}]:[{name:"Home",url:"/"},{name:"Catalog",url:"/courses"},{name:"Login",url:"/login"},{name:"Signup",url:"/signup"}]}},{key:"render",value:function(){return s.a.createElement("div",{id:"NavBarDiv"},s.a.createElement("ul",{className:"NavBar"},s.a.createElement("li",{id:"appTitle"},"MyLMS"),this.linksToDisplay().map(function(e){var t=e.url,n=e.name;return s.a.createElement(m.b,{to:t,key:n},s.a.createElement("li",null,n))})))}}]),t}(r.Component)),b=Object(g.b)(function(e){return{loggedIn:e.usersReducer.loggedIn}})(f),S=n(18),O=n(3),v="http://localhost:9999/api/v1",y=function(e){return function(t){t({type:"LOADING_USER_REQUEST"});var n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user:e})};fetch("".concat(v,"/users"),n).then(function(e){return e.json()}).then(function(e){if(e.error)console.log(e.error),console.log("user email already has an account");else{var n={user:{id:e.user.id,email:e.user.email,name:e.user.name,courseIds:e.user_course_ids}},r={students:e.students},s={assignments:e.assignments};localStorage.setItem("jwt",e.jwt),t({type:"ADD_USER",userPayload:n}),t({type:"ADD_STUDENTS",studentsPayload:r}),t({type:"ADD_ALL_ASSIGNMENTS",assignmentsPayload:s})}})}},j=function(e){return function(t){t({type:"LOADING__USER_REQUEST"});var n={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user:e})};fetch("".concat(v,"/login"),n).then(function(e){return e.json()}).then(function(e){if(e.error)console.log(e.error);else{var n={user:{id:e.user.id,email:e.user.email,name:e.user.name,courseIds:e.user_course_ids}},r={students:e.students},s={assignments:e.assignments};localStorage.setItem("jwt",e.jwt),t({type:"ADD_USER",userPayload:n}),t({type:"ADD_STUDENTS",studentsPayload:r}),t({type:"ADD_ALL_ASSIGNMENTS",assignmentsPayload:s})}})}},C=function(){return function(e){localStorage.removeItem("jwt"),e({type:"REMOVE_USER"}),e({type:"REMOVE_STUDENTS"}),e({type:"REMOVE_ASSIGNMENTS"})}},A=n(25),I=n.n(A),T=function(e){var t=e.errors;return s.a.createElement("ul",null,t.map(function(e){return s.a.createElement("li",{key:e,className:"error-messages"},e)}))},D=function(e){var t=e.handleSubmit,n=e.handleChange,r=e.errors;return s.a.createElement("div",{id:"signup-form"},s.a.createElement(T,{errors:r}),s.a.createElement("form",{onSubmit:function(e){return t(e)}},s.a.createElement("p",null,"Name:",s.a.createElement("input",{type:"string",id:"name",onChange:function(e){return n(e)}})),s.a.createElement("p",null,"Email:",s.a.createElement("input",{type:"string",id:"email",onChange:function(e){return n(e)}})),s.a.createElement("p",null,"Password:",s.a.createElement("input",{type:"password",id:"password",onChange:function(e){return n(e)}})),s.a.createElement("button",{type:"submit",value:"Login"},"Submit")))},_=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).handleOnChange=function(t){e.setState(function(e){return{user:Object(O.a)({},e.user,Object(S.a)({},t.target.id,t.target.value))}})},e.handleOnSubmit=function(t){t.preventDefault(),e.validate()&&(console.log("submitting signup form"),e.props.signup(e.state.user))},e.validate=function(){var t=[],n=!0;return e.state.user.name||(n=!1,t.push("Please enter your name.")),e.state.user.email&&I.a.isEmail(e.state.user.email)||(n=!1,t.push("Please enter a valid email address.")),e.state.user.password||(n=!1,t.push("Please enter your password.")),e.setState({errors:t}),n},e.state={user:{name:"",email:"",password:""},errors:[]},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Sign Up"),s.a.createElement(D,{handleSubmit:this.handleOnSubmit,handleChange:this.handleOnChange,errors:this.state.errors}))}}]),t}(r.Component),U=Object(g.b)(null,function(e){return{signup:function(t){return e(y(t))}}})(_),R=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.logout()}},{key:"render",value:function(){return s.a.createElement("div",null,"Logout")}}]),t}(r.Component),N=Object(g.b)(null,function(e){return{logout:function(){return e(C())}}})(R),w=(n(146),function(e){var t=e.courseInfo;return s.a.createElement(m.b,{to:"/courses/".concat(t.id),className:"courseCard"},s.a.createElement("p",null,t.title))}),L=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"findUserCourses",value:function(){var e=this.props.user;return this.props.courses.filter(function(t){return t.user_ids.includes(e.id)})}},{key:"renderUserCourses",value:function(){return this.findUserCourses().map(function(e){return s.a.createElement(w,{courseInfo:e,key:e.id})})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Welcome ",this.props.user.name),s.a.createElement("h3",null,"Email: ",this.props.user.email),s.a.createElement("label",null,"Below are the courses you are assigned to:"),s.a.createElement("div",null,this.renderUserCourses()))}}]),t}(r.Component),k=Object(g.b)(function(e){return{user:e.usersReducer.currentUser,courses:e.coursesReducer.courses}})(L),B=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"renderAllCourses",value:function(){return this.props.courses.map(function(e){return s.a.createElement(w,{courseInfo:e,key:e.id})})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"All courses"),this.props.loggedIn?s.a.createElement(m.b,{to:"/courses/new"},s.a.createElement("p",null,"Add new course")):null,this.props.loading?null:this.renderAllCourses())}}]),t}(r.Component),P=Object(g.b)(function(e){return{courses:e.coursesReducer.courses,loading:e.coursesReducer.loading,loggedIn:e.usersReducer.loggedIn}},null)(B),M=function(e){var t=e.course;return s.a.createElement("div",null,s.a.createElement("h1",null,"Title: ",t.title),s.a.createElement("h2",null,"Description: ",t.description))},G=function(e){var t=e.assignments;return s.a.createElement("div",null,s.a.createElement("ol",null,t.map(function(e){return s.a.createElement("div",{key:e.id,id:e.id,className:"assignment"},s.a.createElement("li",null,e.title),s.a.createElement("i",null,e.description))})))},F=function(e){var t=e.students,n=e.userCanEdit,r=e.handleOnClick;return s.a.createElement("table",{id:"students-table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Email"))),s.a.createElement("tbody",null,t.map(function(e){return s.a.createElement("tr",{key:e.id},s.a.createElement("td",null,e.name),s.a.createElement("td",null,e.email),n?s.a.createElement("button",{className:"studentRemoveButton",id:e.id,onClick:function(e){return r(e)}},"X"):null)})))},x=function(e){var t=e.assignments,n=e.course,r=e.handleDelete,a=e.enrolledStudents,o=e.unEnrolledStudents,u=e.handleEditButton,i=e.editCourseErrors,c=e.handleShowAssignmentFields,l=e.isUserAssignedToCourse,d=e.newAssignmentErrors,m=e.handleAddingStudent,p=e.handleUnenrollStudentButton;return s.a.createElement("div",null,s.a.createElement(T,{errors:i}),s.a.createElement("h1",{id:"courseTitle"},"Title: ",n.title),s.a.createElement("h2",{id:"courseDescription"},"Description: ",n.description),s.a.createElement("h3",null,"Students"),l?s.a.createElement("div",null,s.a.createElement("select",{id:"addStudentSelect"},s.a.createElement("option",{value:""}," ")," ",o.map(function(e){return s.a.createElement("option",{value:e.id,key:e.name},e.name)})),s.a.createElement("button",{id:"addStudentButton",onClick:m},"Add")):null,0===a.length?s.a.createElement("p",null,"No students assigned"):s.a.createElement(F,{students:a,userCanEdit:l,handleOnClick:p}),s.a.createElement("h3",null,"Assignments"),s.a.createElement(T,{errors:d}),s.a.createElement("div",{id:"add-assignment"},l?s.a.createElement("button",{id:"showAssignmentFieldsButton",onClick:function(){return c()}},"Add Assignment"):null),0===t.length?s.a.createElement("p",null,"No assignments assigned"):s.a.createElement(G,{assignments:t}),s.a.createElement("div",{id:"courseButtons"},l?s.a.createElement("button",{onClick:function(){return r(n)}},"Delete Course"):null,l?s.a.createElement("button",{id:"editCourseButton",onClick:function(e){return u(e)}},"Edit Course Details"):null))},Q="http://localhost:9999/api/v1",V=function(){return function(e){e({type:"LOADING_COURSES_REQUEST"}),fetch("".concat(Q,"/courses")).then(function(e){return e.json()}).then(function(t){return e({type:"ADD_COURSES",courses:t.courses})})}},H=function(e){return function(t){t({type:"LOADING_COURSES_REQUEST"});var n={method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({course:e})};fetch("".concat(Q,"/courses"),n).then(function(e){return e.json()}).then(function(e){if(e.error)console.log(e.error);else{var n={course:e.course};t({type:"ADD_COURSE",coursePayload:n}),t({type:"USER_ADD_COURSE",coursePayload:n})}})}},J=function(e){return function(t){t({type:"LOADING_COURSES_REQUEST"});var n={method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({course:e})};fetch("".concat(Q,"/courses/").concat(e.id),n).then(function(e){return e.json()}).then(function(n){if(n.error)console.log("couldnt delete course (in fetch)"),console.log(n);else{var r={course:e};t({type:"DELETE_COURSE",payload:r}),t({type:"REMOVE_USER_COURSE",payload:r})}})}},z=function(e){return function(t){t({type:"LOADING_COURSES_REQUEST"});var n={method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({course:{id:e.courseId,student_id:e.studentId}})};fetch("".concat(Q,"/courses/").concat(e.courseId,"/students/").concat(e.studentId),n).then(function(e){return e.json()}).then(function(){t({type:"COURSE_ADD_STUDENT",payload:e}),t({type:"STUDENT_ADD_COURSE",payload:e})})}},q=function(e){var t=e.id,n=e.title,r=e.description;return function(e){e({type:"LOADING_COURSES_REQUEST"});var s={method:"PATCH",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({course:{id:t,title:n,description:r}})};fetch("".concat(Q,"/courses/").concat(t),s).then(function(e){return e.json()}).then(function(t){t.error?console.log(t.error):e({type:"UPDATE_COURSE",payload:t})})}},W=function(e){var t=e.courseId,n=e.studentId;return function(e){e({type:"LOADING_COURSES_REQUEST"});var r={method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({course:{id:t,student_id:n}})};fetch("".concat(Q,"/courses/").concat(t,"/students/").concat(n),r).then(function(e){return e.json()}).then(function(r){r.error?console.log(r.error):(e({type:"COURSE_REMOVE_STUDENT",payload:{courseId:t,studentId:n}}),e({type:"STUDENT_REMOVE_COURSE",payload:{courseId:t,studentId:n}}))})}},X=function(e){return function(t){t({type:"LOADING_ASSIGNMENT_REQUEST"});var n={method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("jwt")),"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({assignment:e})};fetch("".concat("http://localhost:9999/api/v1","/assignments"),n).then(function(e){return e.json()}).then(function(e){if(e.error)console.log(e.error);else{var n=e.assignment;t({type:"ADD_ASSIGNMENT",payload:n})}})}},K=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).findThisCourse=function(){return e.props.courses.find(function(t){return t.id===parseInt(e.props.match.params.id)})},e.courseAssignments=function(){var t=e.findThisCourse();return e.props.assignments.filter(function(e){return e.course_id===t.id})},e.isUserAssignedToCourse=function(){var t=e.findThisCourse().id;return e.props.user.courseIds.includes(t)},e.componentDidMount=function(){if(e.props.loggedIn){var t=e.findThisCourse();e.setState({course:{title:t.title,description:t.description,id:t.id}})}},e.handleEditButton=function(t){"editCourseButton"===t.target.id&&(console.log("clicked edit button"),e.addEditFields())},e.addEditFields=function(){var t=document.getElementById("courseTitle"),n=document.getElementById("courseDescription");document.getElementById("editCourseButton").remove(),t.innerHTML='\n      <h1 id="courseTitle">\n        Title: \n        <input id=\'updatedCourseTitle\' type="string" value="'.concat(e.state.course.title,'" />\n      </h1>\n    '),n.innerHTML='\n      <h2 id="courseDescription">\n        Description: \n        <input id=\'updatedCourseDescription\' type="string" value="'.concat(e.state.course.description,'" />\n      </h2>\n    ');var r=document.getElementById("courseButtons");r.innerHTML+='<button id="submitCourseEdit">Submit Course Edits</button>',r.innerHTML+='<button id="cancelCourseEdit">Cancel Course Edits</button>',document.addEventListener("click",e.cancelEditCourse),document.addEventListener("click",e.submitEditCourse),document.addEventListener("keyup",e.updateStateCourse)},e.cancelEditCourse=function(t){if("cancelCourseEdit"===t.target.id){var n=e.findThisCourse();e.setState({course:{title:n.title,description:n.description,id:n.id}}),e.resetCourseEdit()}},e.resetCourseEdit=function(){var t=document.getElementById("courseTitle"),n=document.getElementById("courseDescription"),r=document.getElementById("cancelCourseEdit"),s=document.getElementById("submitCourseEdit");r.remove(),s.remove(),e.setState({editCourseErrors:[]}),t.innerHTML="<h1>Title: ".concat(e.state.course.title,"</h1>"),n.innerHTML="<h2>Title: ".concat(e.state.course.description,"</h2>");document.getElementById("courseButtons").innerHTML+='<button id="editCourseButton">Edit Course Details</button>',document.removeEventListener("click",e.cancelEditCourse),document.removeEventListener("click",e.submitEditCourse),document.removeEventListener("keyup",e.updateStateCourse),document.addEventListener("click",e.handleEditButton)},e.updateStateCourse=function(t){switch(t.target.id){case"updatedCourseTitle":console.log("update course title field"),e.setState(function(e){return{course:Object(O.a)({},e.course,{title:t.target.value})}});break;case"updatedCourseDescription":console.log("update course desc field"),e.setState(function(e){return{course:Object(O.a)({},e.course,{description:t.target.value})}})}},e.submitEditCourse=function(t){"submitCourseEdit"===t.target.id&&e.validateUpdatedCourseDetails()&&(console.log("valid new course details. updating db."),e.props.updateCourse(e.state.course),e.resetCourseEdit())},e.validateUpdatedCourseDetails=function(){var t=!0,n=[],r=e.findThisCourse(),s=r.title,a=r.description;return e.state.course.title===s&&e.state.course.description===a&&(t=!1,n.push("There are no changes. Please cancel updating.")),""===e.state.course.title&&(t=!1,n.push("Please enter a course title.")),""===e.state.course.description&&(t=!1,n.push("Please enter a course description.")),e.setState({editCourseErrors:n}),t},e.handleDelete=function(t){console.log("pressed delete button"),e.props.deleteCourse(t)},e.enrolledStudents=function(){var t=e.findThisCourse().id;return e.props.students.filter(function(e){return e.course_ids.includes(t)})},e.unEnrolledStudents=function(){var t=e.findThisCourse().id;return e.props.students.filter(function(e){return!e.course_ids.includes(t)})},e.handleAddingStudent=function(){var t=parseInt(document.getElementById("addStudentSelect").value),n=e.findThisCourse().id;e.setState({courseAndStudentIds:{studentId:t,courseId:n}}),e.validateAddingStudent()&&e.props.addStudent(e.state.courseAndStudentIds)},e.validateAddingStudent=function(){var t=!0;return""===e.state.courseAndStudentIds.studentId&&(t=!1),t},e.handleUnenrollStudentButton=function(t){e.props.removeStudent({courseId:e.state.course.id,studentId:t.target.id})},e.handleShowAssignmentFields=function(){document.getElementById("add-assignment").innerHTML="\n      <div>\n        <label>Title: </label>\n        <input type='text' id='newAssignmentTitle' value='' />\n      </div>\n      <div>\n        <label>Description: </label>\n        <input type='text' id='newAssignmentDescription' value='' />\n      </div>\n      <p>\n        <button id=\"submitAssignment\">Submit New Assignment</button>\n        <button id=\"cancelNewAssignment\">Cancel</button>\n      </p>\n    ",document.addEventListener("keyup",e.updateStateAssignment),document.addEventListener("click",e.submitAssignment),document.addEventListener("click",e.cancelNewAssignment)},e.updateStateAssignment=function(t){switch(t.target.id){case"newAssignmentTitle":e.setState(function(e){return Object(O.a)({},e,{assignment:Object(O.a)({},e.assignment,{title:t.target.value})})});break;case"newAssignmentDescription":e.setState(function(e){return Object(O.a)({},e,{assignment:Object(O.a)({},e.assignment,{description:t.target.value})})})}},e.submitAssignment=function(t){"submitAssignment"===t.target.id&&(e.setState(function(t){return{assignment:Object(O.a)({},t.assignment,{course_id:e.findThisCourse().id})}}),e.validateAssignmentState()&&(console.log("no errors in newAssignment state"),e.props.addAssignment(e.state.assignment),e.resetNewAssignmentFields()))},e.validateAssignmentState=function(){var t=e.state.assignment,n=[],r=!0;return""===t.title&&(n.push("Please enter a title."),r=!1),""===t.description&&(n.push("Please enter a description."),r=!1),e.setState({newAssignmentErrors:n}),r},e.cancelNewAssignment=function(t){"cancelNewAssignment"===t.target.id&&(e.setState({newAssignmentErrors:[]}),e.resetNewAssignmentFields())},e.resetNewAssignmentFields=function(){document.removeEventListener("click",e.cancelNewAssigment),document.removeEventListener("click",e.submitAssignment),document.removeEventListener("keyUp",e.updateStateAssignment);document.getElementById("add-assignment").innerHTML='\n      <button id="showAssignmentFieldsButton">Add Assignment</button>\n    ',document.addEventListener("click",e.showNewAssignmentFields)},e.showNewAssignmentFields=function(t){"showAssignmentFieldsButton"===t.target.id&&e.handleShowAssignmentFields()},e.state={assignment:{title:"",description:"",course_id:""},courseAndStudentIds:{studentId:"",courseId:""},course:{id:"",title:"",description:""},newAssignmentErrors:[],editCourseErrors:[]},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.findThisCourse();return this.props.loggedIn?s.a.createElement("div",null,e?s.a.createElement(x,{course:e,assignments:this.courseAssignments(),handleDelete:this.handleDelete,enrolledStudents:this.enrolledStudents(),handleShowAssignmentFields:this.handleShowAssignmentFields,isUserAssignedToCourse:this.isUserAssignedToCourse(),newAssignmentErrors:this.state.newAssignmentErrors,unEnrolledStudents:this.unEnrolledStudents(),handleAddingStudent:this.handleAddingStudent,handleEditButton:this.handleEditButton,editCourseErrors:this.state.editCourseErrors,handleUnenrollStudentButton:this.handleUnenrollStudentButton}):s.a.createElement(p.a,{to:"/courses"})):s.a.createElement("div",null,e?s.a.createElement(M,{course:e}):s.a.createElement(p.a,{to:"/courses"}))}}]),t}(r.Component),Y=Object(g.b)(function(e){return{courses:e.coursesReducer.courses,students:e.studentsReducer.students,loggedIn:e.usersReducer.loggedIn,user:e.usersReducer.currentUser,assignments:e.assignmentsReducer.assignments}},function(e){return{deleteCourse:function(t){return e(J(t))},addAssignment:function(t){return e(X(t))},addStudent:function(t){return e(z(t))},updateCourse:function(t){return e(q(t))},removeStudent:function(t){return e(W(t))}}})(K),Z=function(e){var t=e.handleSubmit,n=e.handleChange,r=e.errors;return s.a.createElement("div",{id:"login-form"},s.a.createElement("form",{onSubmit:function(e){return t(e)}},s.a.createElement(T,{errors:r}),s.a.createElement("p",null,"Email:",s.a.createElement("input",{type:"string",id:"email",onChange:function(e){return n(e)}})),s.a.createElement("p",null,"Password:",s.a.createElement("input",{type:"password",id:"password",onChange:function(e){return n(e)}})),s.a.createElement("button",{type:"submit",value:"Login"},"Submit")))},$=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).handleOnChange=function(t){e.setState(function(e){return{user:Object(O.a)({},e.user,Object(S.a)({},t.target.id,t.target.value))}})},e.handleOnSubmit=function(t){t.preventDefault(),e.validate()&&(console.log("submitting login form"),e.props.login(e.state.user))},e.validate=function(){var t=[],n=!0;return e.state.user.email&&I.a.isEmail(e.state.user.email)||(n=!1,t.push("Please enter a valid email address.")),e.state.user.password||(n=!1,t.push("Please enter your password.")),e.setState({errors:t}),n},e.state={user:{email:"",password:""},errors:[]},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Login"),s.a.createElement(Z,{handleSubmit:this.handleOnSubmit,errors:this.state.errors,handleChange:this.handleOnChange}))}}]),t}(r.Component),ee=Object(g.b)(null,function(e){return{login:function(t){return e(j(t))}}})($),te=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).handleOnChange=function(t){e.setState(function(e){return{course:Object(O.a)({},e.course,Object(S.a)({},t.target.id,t.target.value))}})},e.handleOnSubmit=function(t){t.preventDefault(),e.validate()&&(e.props.addCourse(e.state.course),e.setState({submitted:!0}))},e.validate=function(){var t=[],n=!0;return""===e.state.course.title&&(n=!1,t.push("Please enter a title.")),""===e.state.course.description&&(n=!1,t.push("Please enter a description.")),e.setState({errors:t}),n},e.state={course:{title:"",description:""},submitted:!1,errors:[]},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"newCourseComponent"},this.state.submitted?s.a.createElement(p.a,{to:"/courses"}):null,s.a.createElement("form",{id:"#newCourseForm",onSubmit:this.handleOnSubmit},s.a.createElement("h1",null,"New course form"),s.a.createElement("div",{className:"error-messages"},s.a.createElement("ul",null,this.state.errors.map(function(e){return s.a.createElement("li",null,e)}))),s.a.createElement("p",null,"Title:",s.a.createElement("input",{type:"string",id:"title",onChange:this.handleOnChange,value:this.state.course.title})),s.a.createElement("p",null,"Description:",s.a.createElement("textarea",{id:"description",onChange:this.handleOnChange,value:this.state.course.description})),s.a.createElement("input",{type:"submit"})))}}]),t}(r.Component),ne=Object(g.b)(null,function(e){return{addCourse:function(t){return e(H(t))}}})(te),re=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(c.a)(this,Object(l.a)(t).call(this))).getStudents=function(){e.setState({students:e.props.students})},e.searchStudents=function(){var t=document.getElementById("studentSearchWord").value,n=[];n=""===t?e.props.students:e.props.students.filter(function(e){return e.name.toLowerCase().includes(t)}),e.setState({students:n})},e.componentDidMount=function(){e.getStudents()},e.state={students:[]},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("h1",null,"All Students"),s.a.createElement("input",{type:"text",id:"studentSearchWord"}),s.a.createElement("button",{id:"studentSearchButton",onClick:function(){return e.searchStudents()}},"Search"),s.a.createElement(F,{students:this.state.students}))}}]),t}(r.Component),se=Object(g.b)(function(e){return{students:e.studentsReducer.students}})(re),ae=function(e){function t(){return Object(u.a)(this,t),Object(c.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){console.log("App succesfully mounted"),this.props.logout(),this.props.getCourses()}},{key:"render",value:function(){var e=this;return s.a.createElement(m.a,null,s.a.createElement(b,null),s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/",render:function(){return e.props.loggedIn?s.a.createElement(k,null):s.a.createElement(E,null)}}),s.a.createElement(p.b,{exact:!0,path:"/courses",render:function(){return s.a.createElement(P,null)}}),s.a.createElement(p.b,{path:"/courses/new",render:function(){return e.props.loggedIn?s.a.createElement(ne,null):s.a.createElement(p.a,{to:"/courses"})}}),s.a.createElement(p.b,{path:"/courses/:id",render:function(e){var t=e.match;return s.a.createElement(Y,{match:t})}}),s.a.createElement(p.b,{path:"/login",render:function(){return e.props.loggedIn?s.a.createElement(p.a,{to:"/"}):s.a.createElement(ee,null)}}),s.a.createElement(p.b,{path:"/signup",render:function(){return e.props.loggedIn?s.a.createElement(p.a,{to:"/"}):s.a.createElement(U,null)}}),s.a.createElement(p.b,{path:"/logout",render:function(){return e.props.loggedIn?s.a.createElement(N,null):s.a.createElement(p.a,{to:"/"})}}),s.a.createElement(p.b,{path:"/students",render:function(){return e.props.loggedIn?s.a.createElement(se,null):s.a.createElement(p.a,{to:"/"})}}),s.a.createElement(p.b,{render:function(){return s.a.createElement(h,null)}})))}}]),t}(r.Component),oe=Object(g.b)(function(e){return{courses:e.coursesReducer.courses,loggedIn:e.usersReducer.loggedIn}},function(e){return{getCourses:function(){return e(V())},logout:function(){return e(C())}}})(ae),ue=n(20),ie=n(11),ce={courses:[],loading:!1},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_COURSES_REQUEST":return console.log("loading courses request"),Object(O.a)({},e,{courses:Object(ie.a)(e.courses),loading:!0});case"ADD_COURSES":return console.log("adding courses"),Object(O.a)({},e,{courses:t.courses,loading:!1});case"ADD_COURSE":return console.log("adding new course"),Object(O.a)({},e,{courses:[].concat(Object(ie.a)(e.courses),[t.coursePayload.course]),loading:!1});case"DELETE_COURSE":return console.log("deleting course"),Object(O.a)({},e,{courses:Object(ie.a)(e.courses.filter(function(e){return e.id!==t.payload.course.id})),loading:!1});case"UPDATE_COURSE":console.log("updating course");var n=Object(ie.a)(e.courses),r=n.findIndex(function(e){return e.id===t.payload.course.id});return n[r]=t.payload.course,Object(O.a)({},e,{courses:n,loading:!1});case"COURSE_ADD_STUDENT":console.log("adding student to course");var s=Object(ie.a)(e.courses),a=s.findIndex(function(e){return e.id===t.payload.courseId});return s[a].student_ids.push(t.payload.studentId),Object(O.a)({},e,{courses:s,loading:!1});case"COURSE_REMOVE_STUDENT":console.log("removing student from course");var o=Object(ie.a)(e.courses),u=o.findIndex(function(e){return e.id===t.payload.courseId}),i=o[u].student_ids.findIndex(function(e){return e===parseInt(t.payload.studentId)});return o[u].student_ids.splice(i,1),Object(O.a)({},e,{courses:o,loading:!1});default:return e}},de={currentUser:{id:"",name:"",email:"",courseIds:[]},loggedIn:!1,loading:!1},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_USER_REQUEST":return console.log("loading user request"),Object(O.a)({},e,{loading:!0});case"ADD_USER":return console.log("adding user"),Object(O.a)({},e,{currentUser:{id:t.userPayload.user.id,name:t.userPayload.user.name,email:t.userPayload.user.email,courseIds:t.userPayload.user.courseIds},loggedIn:!0,loading:!1});case"USER_ADD_COURSE":return console.log("adding course to currentUser course list"),Object(O.a)({},e,{currentUser:Object(O.a)({},e.currentUser,{courseIds:[].concat(Object(ie.a)(e.currentUser.courseIds),[t.coursePayload.course.id])}),loading:!1});case"REMOVE_USER_COURSE":return console.log("removing course from currentUser course list"),Object(O.a)({},e,{currentUser:Object(O.a)({},e.currentUser,{courseIds:Object(ie.a)(e.currentUser.courseIds.filter(function(e){return e!==t.payload.course.id}))}),loading:!1});case"REMOVE_USER":return console.log("removing user"),Object(O.a)({},e,de);default:return e}},pe={students:[],loading:!1},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_STUDENTS_REQUEST":return console.log("loading students request"),Object(O.a)({},e,{loading:!0});case"ADD_STUDENTS":return console.log("adding students"),Object(O.a)({},e,{students:t.studentsPayload.students,loading:!1});case"STUDENT_ADD_COURSE":console.log("adding courseId to student");var n=Object(ie.a)(e.students),r=n.findIndex(function(e){return e.id===t.payload.studentId});return n[r].course_ids.push(t.payload.courseId),Object(O.a)({},e,{students:n,loading:!1});case"REMOVE_STUDENTS":return Object(O.a)({},e,pe);case"STUDENT_REMOVE_COURSE":var s=Object(ie.a)(e.students),a=s.findIndex(function(e){return e.id===parseInt(t.payload.studentId)}),o=s[a].course_ids.findIndex(function(e){return e===t.payload.courseId});return s[a].course_ids.splice(o,1),Object(O.a)({},e,{students:s,loading:!1});default:return e}},Ee={assignments:[],loading:!1},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_ASSIGNMENT_REQUEST":return console.log("loading assignment request"),Object(O.a)({},e,{loading:!0});case"ADD_ALL_ASSIGNMENTS":return console.log("adding all assignments"),Object(O.a)({},e,{assignments:Object(ie.a)(t.assignmentsPayload.assignments),loading:!1});case"ADD_ASSIGNMENT":return console.log("adding assignment"),Object(O.a)({},e,{assignments:[].concat(Object(ie.a)(e.assignments),[t.payload]),loading:!1});case"REMOVE_ASSIGNMENTS":return Object(O.a)({},e,Ee);default:return e}},fe=Object(ue.b)({coursesReducer:le,usersReducer:me,studentsReducer:ge,assignmentsReducer:he}),be=n(47),Se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ue.c,Oe=Object(ue.d)(fe,Se(Object(ue.a)(be.a)));o.a.render(s.a.createElement(g.a,{store:Oe},s.a.createElement(oe,null)),document.getElementById("root"))},48:function(e,t,n){e.exports=n(148)},56:function(e,t,n){},58:function(e,t,n){}},[[48,2,1]]]);
//# sourceMappingURL=main.d4542e87.chunk.js.map